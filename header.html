<header style="background:#fff;box-shadow:0 2px 10px rgba(0,0,0,0.05);position:sticky;top:0;z-index:1000;padding:15px 0;">
    <div style="max-width:1200px;margin:0 auto;padding:0 20px;display:flex;align-items:center;justify-content:space-between;">
        <!-- Лого -->
        <a href="/" style="font-weight:700;font-size:1.5rem;color:#4f46e5;text-decoration:none; flex-shrink: 0;">AI Dispatcher</a>

        <!-- Десктопное меню (скрыто на мобильных) -->
        <nav id="desktopMenu" style="display:flex;align-items:center;gap:25px;">
            <a href="https://pay.cloudtips.ru/p/a063fe6b" style="text-decoration:none;color:#4f46e5;font-weight:500;">На кофе</a>
            <!-- Ссылка на уроки на главной странице -->
            <a href="/#lessons" style="text-decoration:none;color:#111;font-weight:500;">Уроки</a>
            <!-- Новый раздел "Промты" -->
            <a href="/prompts" style="text-decoration:none;color:#111;font-weight:500;">Промты</a>
            <a href="contact" style="text-decoration:none;color:#111;font-weight:500;">Контакты</a>
            <div style="display:flex;gap:15px;">
                <a href="https://t.me/AIdispatcher9" target="_blank">
                    <img src="telegram.png" alt="Telegram" width="24" height="24" style="display: block;">
                </a>
                <a href="https://playbeat.store/" target="_blank">
                    <img src="лого-playbeat.png" alt="PlayBeat" width="24" height="24" style="display: block;">
                </a>
            </div>
        </nav>

        <!-- Кнопка мобильного меню (скрыта на десктопе) -->
        <button id="menuBtn" style="background:none;border:none;cursor:pointer;display:none; font-size: 1rem; color: #4f46e5; font-weight: 600; padding: 5px 10px; border-radius: 5px;">
            <span>Меню</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="#4f46e5" style="vertical-align: middle; margin-left: 5px;">
                <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
            </svg>
        </button>
    </div>

    <!-- Мобильное выезжающее меню -->
    <div id="sideMobileMenu" style="position: fixed; top: 0; left: -250px; bottom: 0; width: 250px; background: #fff; box-shadow: 2px 0 10px rgba(0,0,0,0.2); z-index: 1001; transition: left 0.3s ease; overflow-y: auto; padding: 20px 0;">
        <div style="padding: 0 20px;">
            <!-- Кнопка закрытия -->
            <button id="closeMenuBtn" style="background:none;border:none;cursor:pointer;font-size:1.8rem;color:#111;position:absolute;top:10px;right:10px;">×</button>

            <!-- Меню ссылки -->
            <nav style="padding-top: 30px; display: flex; flex-direction: column;">
                 <a href="https://pay.cloudtips.ru/p/a063fe6b" style="display:block;padding:15px 0;text-decoration:none;color:#4f46e5; border-bottom: 1px solid #eee; font-weight: 500;">На кофе</a>
                 <a href="/#lessons" style="display:block;padding:15px 0;text-decoration:none;color:#111; border-bottom: 1px solid #eee; font-weight: 500;">Уроки</a>
                 <a href="/prompts" style="display:block;padding:15px 0;text-decoration:none;color:#111; border-bottom: 1px solid #eee; font-weight: 500;">Промты</a>
                 <a href="contact" style="display:block;padding:15px 0;text-decoration:none;color:#111; border-bottom: 1px solid #eee; font-weight: 500;">Контакты</a>
            </nav>

            <!-- Социальные иконки -->
            <div style="margin-top: 30px; display:flex;gap:20px; justify-content: center;">
                 <a href="https://t.me/AIdispatcher9" target="_blank">
                     <img src="telegram.png" alt="Telegram" width="28" height="28" style="display: block;">
                 </a>
                 <a href="https://playbeat.store/" target="_blank">
                     <img src="лого-playbeat.png" alt="PlayBeat" width="28" height="28" style="display: block;">
                 </a>
            </div>
        </div>
    </div>

    <!-- Оверлей для затемнения фона -->
    <div id="mobileMenuOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: none; transition: opacity 0.3s ease;"></div>

    <script>
        const menuBtn = document.getElementById('menuBtn');
        const desktopMenu = document.getElementById('desktopMenu');
        const sideMobileMenu = document.getElementById('sideMobileMenu');
        const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
        const closeMenuBtn = document.getElementById('closeMenuBtn');

        // Функция для открытия мобильного меню
        function openMobileMenu() {
            sideMobileMenu.style.left = '0'; // Выдвигаем меню сбоку
            mobileMenuOverlay.style.display = 'block'; // Показываем оверлей
            // Опционально: добавляем класс для плавного появления оверлея через opacity
            setTimeout(() => { mobileMenuOverlay.style.opacity = '1'; }, 10); // Небольшая задержка для анимации opacity
            document.body.style.overflow = 'hidden'; // Запрещаем скролл основного контента
        }

        // Функция для закрытия мобильного меню
        function closeMobileMenu() {
            sideMobileMenu.style.left = '-250px'; // Сдвигаем меню обратно за экран
            mobileMenuOverlay.style.opacity = '0'; // Скрываем оверлей плавно
             // Ждем завершения анимации opacity, затем скрываем совсем и разрешаем скролл
            setTimeout(() => {
                 mobileMenuOverlay.style.display = 'none';
                 document.body.style.overflow = ''; // Разрешаем скролл
            }, 300); // Время должно совпадать с transition-duration оверлея
        }


        // Функция для обновления видимости меню в зависимости от размера экрана
        function updateMenuVisibility() {
            const isMobile = window.innerWidth <= 768;

            if (isMobile) {
                menuBtn.style.display = 'block'; // Показываем кнопку "Меню"
                desktopMenu.style.display = 'none'; // Скрываем десктопное меню

                // Если меню было открыто при ресайзе на десктоп, закрываем его
                if (sideMobileMenu.style.left === '0px') {
                     closeMobileMenu();
                }

            } else {
                menuBtn.style.display = 'none'; // Скрываем кнопку "Меню"
                desktopMenu.style.display = 'flex'; // Показываем десктопное меню
                closeMobileMenu(); // Убеждаемся, что мобильное меню закрыто на десктопе
            }
        }

        // Привязываем события
        menuBtn.addEventListener('click', openMobileMenu); // Клик по кнопке "Меню" открывает меню
        closeMenuBtn.addEventListener('click', closeMobileMenu); // Клик по кнопке закрытия закрывает меню
        mobileMenuOverlay.addEventListener('click', closeMobileMenu); // Клик по оверлею закрывает меню

        // Закрывать мобильное меню при клике на ссылку внутри него
        sideMobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', closeMobileMenu);
        });

        // Вызываем функцию при загрузке и изменении размера окна
        window.addEventListener('load', updateMenuVisibility);
        window.addEventListener('resize', updateMenuVisibility);

        // Также вызываем при DOMContentLoaded для корректного отображения до полной загрузки
         document.addEventListener('DOMContentLoaded', updateMenuVisibility);
    </script>
</header>
